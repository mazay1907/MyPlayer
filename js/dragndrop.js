/**
 * Created by mazay1907 on 3/29/2016.
 */
var ball = document.getElementById("progr-bar-point"),
    bar = document.getElementById("progress-bar"),
    test = document.getElementById("test");

ball.onmousedown = function(e) { // 1. ????????? ???????

    // ??????????? ? ???????????
    // 2. ?????????? ?? ??? ?? ?????, ?? ? ?????????? ???????????
    ball.style.position = 'absolute';
    moveAt(e);
    // ?????????? ? body, ????? ??? ??? ????? ?? ?????? position:relative
    document.body.appendChild(ball);

    ball.style.zIndex = 1000; // ?????????? ??? ??? ??????? ??????????

    // ??????????? ??? ??? ?????????? ???????
    // ? ???????? ?? ???????? ??????/?????? ??? ?????????????
    function moveAt(e) {
        ball.style.left = e.pageX - ball.offsetWidth / 2 + 'px';
        //ball.style.top = e.pageY - ball.offsetHeight / 2 + 'px';
        Name(e);
    }

    // 3, ?????????? ?? ??????
    document.onmousemove = function(e) {
        moveAt(e);
    }

    // 4. ????????? ????????? ????????
    ball.onmouseup = function() {
        document.onmousemove = null;
        ball.onmouseup = null;
    }
}


var leftProgBarSize = bar.getBoundingClientRect().left,
    widthProgBarSize = bar.getBoundingClientRect().width;


function Name(e) {
    console.log(e.pageX);
    var durationCurSong = playlist[trackNum].duration,
        pxInSec = durationCurSong / widthProgBarSize;
        //pxInSec = widthProgBarSize / durationCurSong;
        newProgress = e.pageX - leftProgBarSize;
        timeFromPx = newProgress * pxInSec;
    console.log(durationCurSong);
    console.log(pxInSec);
    console.log(timeFromPx);
    curentProgress.style.width = newProgress  + "px";
    playlist[trackNum].currentTime = timeFromPx;

}





/*
test.onclick = function() {
    //console.log(x1.getBoundingClientRect());
};
// 450 750

x1.onmousedown = function (e) {
    e = e || window.event;
    //progressBarPoint.style.left = e.clientX + 10 + "px";

    console.log(e.clientX);
    console.log(e.clientY);
};
x1.onmousemove = function (e) {
    e = e || window.event;
    var a = e.clientX + 100;
    progressBarPoint.style.left = a + "px";
}

*/
